require=function r(a,i,s){function l(t,e){if(!i[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}var n=i[t]={exports:{}};a[t][0].call(n.exports,function(e){return l(a[t][1][e]||e)},n,n.exports,r,a,i,s)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({Ball:[function(e,t,o){"use strict";cc._RF.push(t,"69862Pi63FOwZE7Ovc6YDR7","Ball"),Object.defineProperty(o,"__esModule",{value:!0});var c=e("./Game"),n=cc._decorator,r=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.node.getWorldPosition().y<0&&(this.node.destroy(),c.default.activeBalls--)},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./Game":"Game"}],Block:[function(e,t,o){"use strict";cc._RF.push(t,"bb2bc9N6ENAoIjEdtZMxn/z","Block"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Game"),c=cc._decorator,r=c.ccclass,a=c.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.countLabel=null,e._count=1,e}return __extends(e,t),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},set:function(e){0===e&&this.node.destroy(),this._count=e,this.countLabel.string=e.toString()},enumerable:!0,configurable:!0}),e.prototype.onBeginContact=function(e,t,o){this.node.getPosition();var c=cc.repeat(cc.sequence(cc.moveBy(.05,cc.v2(5,5)),cc.moveBy(.05,cc.v2(-5,-5))),5);this.node.runAction(c),this.count--,n.default.score++},__decorate([a(cc.Label)],e.prototype,"countLabel",void 0),__decorate([a],e.prototype,"_count",void 0),e=__decorate([r],e)}(cc.Component);o.default=i,cc._RF.pop()},{"./Game":"Game"}],Canvas:[function(e,t,o){"use strict";cc._RF.push(t,"9547c0nA4JAbaoK+/Ku1bLF","Canvas"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Block"),i=e("./Game"),c=cc._decorator,n=c.ccclass,r=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aim=null,e.ballPrefab=null,e.scoreLabel=null,e.currentScoreLabel=null,e.resultLabel=null,e.ballsLabel=null,e.starsParticlePrefab=null,e.shapePrefabs=[],e._lastScore=0,e._shapes=[],e._seq=0,e._processed=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){t.aim.lookAt(cc.v2(e.getLocation()))}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t.aim.lookAt(cc.v2(e.getLocation()))}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){0<i.default.activeBalls||(t._fire(cc.v2(e.getLocation())),2<=i.default.balls&&t.schedule(function(){t._fire(cc.v2(e.getLocation()))},.25,i.default.balls-2))})},e.prototype.update=function(e){var t=this;if(this.ballsLabel.string="Balls: "+i.default.balls.toString(),0<i.default.activeBalls)return this._processed=!1,0<i.default.score-this._lastScore&&(this.currentScoreLabel.node.active=!0,this.currentScoreLabel.string="+"+(i.default.score-this._lastScore)),void(this.aim.active=!1);if(!this._processed){if(this._lastScore!==i.default.score){var o=i.default.score-this._lastScore,c=i.default.score/this._seq;2*c<=o?(this._showStarsParticle(),this._showResult("Incredible!")):1.5*c<=o?(this._showStarsParticle(),this._showResult("Excellent!")):1.25*c<=o?this._showResult("Well Done!"):1*c<=o&&this._showResult("Good Effort!"),this._showScoreAnimation(),this._lastScore=i.default.score}this._shapes=this._shapes.filter(function(e){return cc.isValid(e)}),this._shapes.forEach(function(e){e.runAction(cc.moveBy(.25,cc.v2(0,100)))}),this.scheduleOnce(function(){return t._generateShapes()},.5),this.scoreLabel.string="Score: "+i.default.score.toString(),this.currentScoreLabel.node.active=!1,this.aim.active=!0,this._processed=!0}},e.prototype._generateShapes=function(){this._seq++;for(var e=!1,t=0,o=1;o<=7;o++){var c=this._randomShape();if("PlusOne"===c.name){if(i.default.balls>Math.sqrt(this._seq)||e)continue;e=!0}else if(.25<Math.random()&&1<t)continue;t++;var n=cc.instantiate(c);n.position=cc.v2(90*(o-.5)-this.node.width/2,20+n.height/2-this.node.height/2),n.rotation=50*(Math.random()-.5);var r=n.getComponent(a.default);r&&(r.count=Math.ceil(4*this._seq*Math.random())),n.parent=this.node,this._shapes.push(n)}},e.prototype._randomShape=function(){return this.shapePrefabs[Math.floor(Math.random()*this.shapePrefabs.length)]},e.prototype._showScoreAnimation=function(){var e=cc.instantiate(this.currentScoreLabel.node);e.parent=this.node,e.runAction(cc.sequence(cc.spawn(cc.moveTo(.25,this.scoreLabel.node.position),cc.fadeOut(.3),cc.scaleTo(.25,.5)),cc.callFunc(function(){e.destroy()})))},e.prototype._showStarsParticle=function(){var e=cc.instantiate(this.starsParticlePrefab);e.position=cc.v2(0,568),e.parent=this.node},e.prototype._showResult=function(e){this.resultLabel.string=e,this.resultLabel.node.runAction(cc.sequence(cc.fadeIn(.25),cc.delayTime(.5),cc.fadeOut(.25)))},e.prototype._fire=function(e){var t=cc.instantiate(this.ballPrefab),o=t.getComponent(cc.RigidBody);t.parent=this.node,t.position=this.aim.position,o.linearVelocity=e.sub(this.aim.getWorldPosition()).normalize().mul(2e3),i.default.activeBalls++},__decorate([r(cc.Node)],e.prototype,"aim",void 0),__decorate([r(cc.Prefab)],e.prototype,"ballPrefab",void 0),__decorate([r(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([r(cc.Label)],e.prototype,"currentScoreLabel",void 0),__decorate([r(cc.Label)],e.prototype,"resultLabel",void 0),__decorate([r(cc.Label)],e.prototype,"ballsLabel",void 0),__decorate([r(cc.Prefab)],e.prototype,"starsParticlePrefab",void 0),__decorate([r([cc.Prefab])],e.prototype,"shapePrefabs",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./Block":"Block","./Game":"Game"}],Config:[function(e,t,o){"use strict";cc._RF.push(t,"2d0255wwDhDJ4yrOjGdnvcw","Config"),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=0,cc._RF.pop()},{}],Extensions:[function(e,t,o){"use strict";cc._RF.push(t,"168ae5Fcz9Eeqxoba4/sf3T","Extensions"),cc.Node.prototype.getWorldPosition=function(){return this.parent.convertToWorldSpaceAR(this.getPosition())},cc.Node.prototype.lookAt=function(e){var t=cc.pToAngle(e.sub(this.getWorldPosition()));this.rotation=180*-t/Math.PI},cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"fd1f9ETXHdLGp58m+mZAmx/","Game"),Object.defineProperty(o,"__esModule",{value:!0});o.default={activeBalls:0,balls:1,score:0},cc._RF.pop()},{}],PlusOne:[function(e,t,o){"use strict";cc._RF.push(t,"6d9eaXL0U5O8q4Ci5+k3sMs","PlusOne"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Game"),c=cc._decorator,n=c.ccclass,a=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEndContact=function(e,t,o){if(cc.isValid(this.node)){var c=cc.instantiate(o.node),n=c.getComponent(cc.RigidBody);n.linearVelocity=cc.v2(-n.linearVelocity.x,n.linearVelocity.y),c.parent=this.node.parent,r.default.activeBalls++,r.default.balls++,r.default.score++,this.node.destroy()}},t=__decorate([n],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./Game":"Game"}]},{},["Ball","Block","Canvas","Config","Extensions","Game","PlusOne"]);